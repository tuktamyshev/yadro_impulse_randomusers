<!DOCTYPE html>
<html>
<head>
    <title>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</title>
    <style>
        img { width: 50px; border-radius: 50%; }
        table { border-collapse: collapse; width: 100%; }
        th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
        a { text-decoration: none; color: blue; }
        nav { margin-top: 20px; }
        .pagination a {
            margin: 0 5px;
            padding: 5px 10px;
            background-color: #eee;
            border: 1px solid #ccc;
            text-decoration: none;
        }
        .pagination a.active {
            font-weight: bold;
            background-color: #ddd;
        }
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .random-btn {
            padding: 6px 12px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 4px;
            text-decoration: none;
            font-weight: bold;
        }
        .random-btn:hover {
            background-color: #357ae8;
        }
    </style>
</head>
<body>
    <h1>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h1>

    <div class="top-bar">
        <form method="get" action="/fetch_users" style="margin: 0;">
            <label>–°–∫–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ API?</label>
            <input type="number" name="count" min="1" max="100" value="10">
            <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </form>

        <a href="/homepage/random" class="random-btn" title="–ü–æ–∫–∞–∑–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">üé≤ –°–ª—É—á–∞–π–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</a>
    </div>

    <!-- –í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É -->
    <form method="get" action="/homepage">
        <label for="limit">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É:</label>
        <select name="limit" id="limit" onchange="this.form.submit()">
            <option value="10" {% if limit == 10 %}selected{% endif %}>10</option>
            <option value="50" {% if limit == 50 %}selected{% endif %}>50</option>
            <option value="100" {% if limit == 100 %}selected{% endif %}>100</option>
        </select>
        <input type="hidden" name="offset" value="0">
    </form>

    <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {{ total }} ‚Äî –≤—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü: {{ (total // limit) + (1 if total % limit else 0) }}</p>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–≤–µ—Ä—Ö—É -->
    <nav class="pagination">
        {% if offset >= limit %}
        <a href="/homepage?limit={{ limit }}&offset={{ offset - limit }}">‚Üê –ù–∞–∑–∞–¥</a>
        {% endif %}
        <a class="active">–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ (offset // limit) + 1 }}</a>
        {% if has_more %}
        <a href="/homepage?limit={{ limit }}&offset={{ offset + limit }}">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
        {% endif %}
    </nav>

    <table>
        <tr>
            <th>–§–æ—Ç–æ</th>
            <th>–ò–º—è</th>
            <th>–§–∞–º–∏–ª–∏—è</th>
            <th>Email</th>
            <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th>–õ–æ–∫–∞—Ü–∏—è</th>
            <th>–ü–æ–ª</th>
            <th>–ü–æ–¥—Ä–æ–±–Ω–µ–µ</th>
        </tr>
        {% for user in users %}
        <tr>
            <td><img src="{{ user.photo_url }}" alt="avatar"></td>
            <td>{{ user.first_name }}</td>
            <td>{{ user.last_name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.phone_number }}</td>
            <td>{{ user.address }}</td>
            <td>{{ user.gender.value }}</td>
            <td><a href="/homepage/{{ user.uuid }}">üîç</a></td>
        </tr>
        {% endfor %}
    </table>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å–Ω–∏–∑—É -->
    <nav class="pagination">
        {% if offset >= limit %}
        <a href="/homepage?limit={{ limit }}&offset={{ offset - limit }}">‚Üê –ù–∞–∑–∞–¥</a>
        {% endif %}
        <a class="active">–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ (offset // limit) + 1 }}</a>
        {% if has_more %}
        <a href="/homepage?limit={{ limit }}&offset={{ offset + limit }}">–í–ø–µ—Ä—ë–¥ ‚Üí</a>
        {% endif %}
    </nav>
</body>
</html>
